// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import {Test} from "forge-std/Test.sol";
import {FormalVerificationCatches} from "src/invariant-break/FormalVerificationCatches.sol";

contract HalmosTest is Test {
    FormalVerificationCatches fvc;

    function setUp() external {
        fvc = new FormalVerificationCatches();
    }

    //requires => preconditions
    //require(x) => assume x about the run
    //assume(x) <- valid foundry, but not halmos
    //halmos only cares about assert => assert(x)
    //halmos --function function_name
    function check_hellFunc_doesnt_revert_halmos(uint128 num) external {
        //halmos: f(x) == not revert
        //look for mathemetical proof that the function will/can revert
        (bool success,) = address(fvc).staticcall(abi.encodeCall(FormalVerificationCatches.hellFunc, (num)));
        assert(success);
    }

    function test_hellFunc_doesnt_revert_halmos() external {
        uint128 num = 99;
        (bool success,) = address(fvc).staticcall(abi.encodeCall(FormalVerificationCatches.hellFunc, (num)));
        assert(success);
    }
}
